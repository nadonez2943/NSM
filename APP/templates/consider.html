<doctype html>
  {% extends 'layout.html' %}
  
  {% block body %}
  <head>
  <style>
    input[id="nstt"]{
      height: 35px;
      width: 110px;
      border: none;
      border-radius: 5px;
      color:black;
      background: transparent;
      text-align: center;  
    }
    input[id="nstt2"]{
      height: 35px;
      width: 210px;
      border: none;
      border-radius: 5px;
      color:black;
      background: transparent;
      text-align: center;  
    }
    a {
      display:block;
    }
    * {
        box-sizing: border-box;
      }
    .openBtn {
      display: block;
      justify-content: left;
      }
    .openButton {
      border: none;
      border-radius: 5px;
      background-color: #2E4778;
      color: white;
      padding: 14px 20px;
      cursor: pointer;
      }
    .loginPopup {
        position: relative;
        text-align: center;
        width: 100%;
      }
    .formPopup {
        display: none;
        position: fixed;
        left: 50%;
        top: 5%;
        transform: translate(-50%, 5%);
        border: 3px solid #999999;
        z-index: 9;
      }
    .formContainer {
        max-width: 300px;
        padding: 20px;
        background-color: #fff;
      }
    .formContainer input[type=date] {
        width: 100%;
        padding: 15px;
        margin: 5px 0 20px 0;
        border: none;
        background: #eee;
      }
    .formContainer input[type=date]:focus {
        background-color: #ddd;
        outline: none;
      }
      .formContainer input[type=text] {
        width: 100%;
        padding: 15px;
        margin: 5px 0 20px 0;
        text-align: center;
        border: none;
        background: #eee;
      }
    .formContainer input[type=text]:focus {
        background-color: #ddd;
        outline: none;
      }
    .formContainer .btn {
        padding: 12px 20px;
        border: none;
        background-color: #2E4778;
        color: #fff;
        cursor: pointer;
        width: 100%;
        margin-bottom: 15px;
      }
    .formContainer .cancel {
        background-color: grey;
      }
    .formContainer .btn:hover,
    .openButton:hover {
        opacity: 1;
      }
    .c25 {
          float: right;
          width: 36%;
          text-align: right;
          margin-top: 11px;
        }
    .c75 {
            float: left;
            width: 50%;
            text-align: left;
            margin-top: 6px;
        }
  </style>
  </head>

  <div class="row">
        <p>
          <br><h1>พิจารณาผลโครงการ</h1>
          <div class="card-group">
            <div class="card">
              <div class="card-header">
                <h5>สถานะ</h5>
              </div>
              <div class="card-body" align="center">
                  <progress id="file" value="{{row[0]['stcon_percent']}}" max="100"></progress>    
                  <br><br>
                  <label for="file">{{row[0]['stcon_name']}}</label>
                  <form action="/project/{{row[0]['pj_id']}}/consider" method="post">
                    <input name="checkboxdate" id="checkboxdate" value="0" type="hidden">
                        <input name="bdate" value="{{row[0]['buy_date']}}" type="hidden">
                        <input name="idate" value="{{row[0]['invite_date']}}" type="hidden">
                        <input name="pdate" value="{{row[0]['prop_date']}}" type="hidden">
                        <input name="fdate" value="{{row[0]['finishcon_date']}}" type="hidden">
                        <input name="rdate" value="{{row[0]['report_date']}}" type="hidden">
                        <input name="rtime" value="{{row[0]['report_time']}}" type="hidden">
                        <input name="wdate" value="{{row[0]['winner_date']}}" type="hidden">
                        <input name="CPMC" value="{{row[0]['conPMcheck']}}" type="hidden">
                        <input name="stc" value="{{row[0]['stcon_id']}}" type="hidden">
                        <input name="conapp" value="{{row[0]['conapp_status']}}" type="hidden" >
                        <input name="userrole" value="{{role['role']}}" type="hidden">
                        <input type="hidden" value="{{row[0]['buy_date']}}" name="buy_date" id="buy_date">
                        <input type="hidden" value="{{row[0]['invite_date']}}" name="invite_date" >
                        <input type="hidden" value="{{row[0]['prop_date']}}" name="prop_date" >
                        <input type="hidden" value="{{row[0]['finishcon_date']}}" name="finishcon_date" >
                        <input type="hidden" value="{{row[0]['report_date']}}" name="report_date" >
                        <input type="hidden" name="report_time"  value="{{row[0]['report_time']}}">
                        <input type="hidden" value="{{row[0]['winner_date']}}" name="winner_date" >
                    <input type="hidden" id="appbottonc"onclick="return confirm('ยืนยัน')" value="ยืนยัน" >
                  </form>
                  <div class="openBtn">
                    <button class="openButton" onclick="openForm()" id="openf" style="display: none;"><strong id="formbutton">กรอกวันที่</strong></button>
                  </div>
                  <div class="loginPopup">
                    <div class="formPopup" id="popupForm">
                      <form action="/project/{{row[0]['pj_id']}}/consider" method="post" class="formContainer">
                        <input name="userrole" id="userrole" value="{{role['role']}}" type="hidden">
                        <label>
                          <strong id="buyd" style="display: none;">วันประกาศซื้อจ้าง</strong>
                        </label>
                        <input type="hidden" value="0000-00-00" name="buy_date" id="buy_date" required>
                        <label>
                          <strong id="invited" style="display: none;">วันประกาศเชิญ</strong>
                        </label>
                        <input type="hidden" value="0000-00-00" name="invite_date" id="invite_date" required>
                        <label>
                        <strong id="propd" style="display: none;">วันที่ยื่นคุณสมบัติ</strong>
                        </label>
                        <input type="hidden" value="0000-00-00" name="prop_date" id="prop_date" required>
                        <label>
                        <strong id="finishcond" style="display: none;">วันพิจารณาแล้วเสร็จ</strong>
                        </label>
                        <input type="hidden" value="" name="finishcon_date" id="finishcon_date" required>
                        <label>
                        <strong id="reportd" style="display: none;">วันและเวลาที่ส่งรายงานผล</strong>
                        </label>
                        <input type="hidden" value="" name="report_date" id="report_date" required>
                        <div id="reptime" style="display: none;"><input type="text" id="timepicker" name="report_time" id="report_time" value="00:00"></div>
                        <label>
                        <strong id="winnerd" style="display: none;">วันที่ประกาศผู้ชนะ</strong>
                        </label>
                        <input type="hidden" value="" name="winner_date" id="winner_date" required>
                        <div class="row" id="noinfo">
                          <div class="c25"><input type='checkbox' onchange='handleChange(this); '></div>
                          <div class="c75"><p>ไม่มีข้อมูล</p></div>
                        </div>
                        <input name="checkboxdate" id="checkboxdate" value="0" type="hidden">
                        <input name="bdate" id="bdate" value="{{row[0]['buy_date']}}" type="hidden">
                        <input name="idate" id="idate" value="{{row[0]['invite_date']}}" type="hidden">
                        <input name="pdate" id="pdate" value="{{row[0]['prop_date']}}" type="hidden">
                        <input name="fdate" id="fdate" value="{{row[0]['finishcon_date']}}" type="hidden">
                        <input name="rdate" id="rdate" value="{{row[0]['report_date']}}" type="hidden">
                        <input name="rtime" id="rtime" value="{{row[0]['report_time']}}" type="hidden">
                        <input name="wdate" id="wdate" value="{{row[0]['winner_date']}}" type="hidden">
                        <input name="CPMC" id="CPMC" value="{{row[0]['conPMcheck']}}" type="hidden">
                        <input name="stc" id="stc" value="{{row[0]['stcon_id']}}" type="hidden">
                        <input name="conapp" id="conapp" value="{{row[0]['conapp_status']}}" type="hidden" >
                        <button type="submit" onclick="return confirm('ยืนยัน')" class="btn">เสร็จสิ้น</button>
                        <button type="button" class="btn cancel" onclick="closeForm()">ยกเลิก</button>
                      </form>
                    </div>
                  </div>
              </div>
            </div>
            <p></p>
            <div class="card" id="divd" style="margin-left:5px;">
              <div class="card-header" align="center">
                <h5>ระยะเวลา</h5>
              </div>
              <div class="card-body">
                
              </div>
            </div>
          </div>
        </p>

        <div class="leftcolumn">
          <div class="card">
            <div class="card-body">
              <h5>รายละเอียดโครงการ</h5><hr>
              <div class="row">
                <div class="col-25">
                  <label>เลขสารบัญ</label>
                </div>
                <div class="col-75">
                  <label>{{row[0]['pj_refNumber']}}</label>
                </div>
              </div>
              <div class="row">
                <div class="col-25">
                  <label>ชื่อโครงการ</label>
                </div>
                <div class="col-75">
                  <label>{{row[0]['pj_name']}}</label>
                </div>
              </div>
              <div class="row">
                <div class="col-25">
                  <label>ผู้รับผิดชอบโครงการ</label>
                </div>
                <div class="col-75">
                  <label>{{rows[0]['user_fullname']}}</label>
                </div>
              </div>
              <div class="row">
                <div class="col-25">
                  <label>คณะกรรมการ</label>
                </div>
                <div class="col-75">
                  {% for result in row %}
                  <div class="row"><div class="col-50"><label>{{result['user_fullname']}}</label></div><div class="col-25"><label >{{result['role_name']}}</label></div></div>
                  {% endfor %}
                  <div align="Right"><a href="addboardc" id="addboardc" role="button"> แก้ไขรายชื่อคณะกรรมการ</a></div>
                </div>
              </div><br>
              <div class="row">
                <div class="col-25">
                  <label>วันที่เริ่มโครงการ</label>
                </div>
                <div class="col-75">
                  <label>{{row[0]['startdate']}}</label>
                </div>
              </div>
              <div class="row">
                <div class="col-25">
                  <label>งบประมาณ</label>
                </div>
                <div class="col-75">
                  <label>{{row[0]['pjamount']}} บาท</label>
                </div>
              </div>
              <div class="row">
                <div class="col-25">
                  <label>รายละเอียด</label>
                </div>
                <div class="col-75">
                  <label>{{row[0]['pj_detail']}}
                  </label>
                </div>
              </div>
              <p align="right"><a href="/project/{{id}}/editproject" id="editpj">แก้ไข</a></p>
            </div>
          </div>

          <div class="card" style="margin-top: 8px;">
            <div class="card-body">
              <h5>ข้อมูลบริษัท</h5><hr>
              <div class="row">
                <div class="col-25">
                  <label>วันที่ประกาศผลบริษัทผู้รับเหมา</label>
                </div>
                <div class="col-75">
                  <label>{{row[0]['conttdate']}}</label>
                </div>
              </div>
              <div class="row">
                <div class="col-25">
                  <label>บริษัทผู้รับเหมา</label>
                </div>
                <div class="col-75">
                  <label>{{row[0]['contt_name']}}</label>
                </div>
              </div><div class="row">
                <div class="col-25">
                  <label>อีเมล</label>
                </div>
                <div class="col-75">
                  <label>{{row[0]['contt_email']}}</label>
                </div>
              </div><div class="row">
                <div class="col-25">
                  <label>วันที่เริ่ม</label>
                </div>
                <div class="col-75">
                  <label>{{row[0]['conttstart']}}</label>
                </div>
              </div><div class="row">
                <div class="col-25">
                  <label>วันที่สิ้นสุด</label>
                </div>
                <div class="col-75">
                  <label>{{row[0]['conttend']}}</label>
                </div>
              </div><div class="row">
                <div class="col-25">
                  <label>ระยะเวลาคงเหลือ</label>
                </div>
                <div class="col-75">
                  <label>{{row[0]['condiff']}} วัน</label>
                </div>
              </div>
              <input id="conttid" value="{{row[0]['contt_id']}}" type="hidden">
              <p align="right"><a href="/addcontractor/{{id}}" id="addcontt">เพิ่ม</a><a href="/editcontractor/{{id}}" id="editcontt"> แก้ไข</a></p>
            </div>
          </div>
        </div>
         
        <div class="rightcolumn" style="background-color:#ffffff;">
          
          <div class="card">
            <div class="card-header">
            <center><h5>การนัดหมาย</h5></center>
            </div>
            <div class="card-body">
              <center>
              <p id="evn">{{ev[0]['ev_name']}}</p>
              <p id="evd">วันที่ {{ev[0]['evdate']}}</p>
              <p id="evt">เวลา {{ev[0]['evtime']}} น.</p>
              </center>
              <a align="right" href="considerEvent">ดูเพิ่มเติม</a>
            </div>
          </div>
          <div class="card" style="margin-top: 5px;">
            <div class="card-body">
              <a align="center" href="doc/2">เอกสารโครงการ</a>
            </div>
          </div>
          <div class="card" style="margin-top:8px;">
            <div class="card-body" align="center">
              <a href="/project/{{row[0]['pj_id']}}/addpacview">เพิ่มประกาศจากกองพัสดุ</a>
            </div>
          </div>
        </div>

  </div>
  <br>
  <div class="footer">
    <a class="btn btn-primary btn-lg" type="button" href="/project/{{row[0]['pj_id']}}">ย้อนกลับ</a>
  </div>  
  <script>
    var popupForm = document.getElementById("popupForm");
    function openForm() {
      document.getElementById("popupForm").style.display = "block";
    }
    function closeForm() {
      document.getElementById("popupForm").style.display = "none";
    }
    window.onclick = document.getElementById("popupForm").style.display = "none";
  </script>
  {% endblock %}
