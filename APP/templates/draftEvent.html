<doctype html>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
    {% extends 'layout.html' %}
    {% block body %}
    <br>
    <a class="btn btn-primary btn-lg" type="button" href="/project/{{row[0]['pj_id']}}/draft">ย้อนกลับ</a>
    <br>
    <br>
    <div class="card">
        
        <div class="card-header">
            <div class="col-50"><h1>กิจกรรม</h1></div>
            <div class="col-50" align="right"><a type="button" class="btn-outline btn-lg" href="addeventd">เพิ่มกิจกรรม</a></div>
        </div>
        <input type="hidden" id="dif" value="{{diff[0]['diff']}}">
        <!-- <div class="card-body"> -->
            <table id="eventt">
                <tr>
                <th>ลำดับ</th>
                <th>ชื่ออีเวนท์</th>
                <th>รายละเอียด</th>
                <th>วันที่</th>
                <th>เวลา</th>
                <th >แก้ไข</th>
                <th >ลบ</th>
                </tr>
                {% for result in row %}
                <tr>
                <td id="rnt">{{result['row_num']}}</td>
                <td id="evnt">{{result['ev_name']}}</td>
                <td id="evet">{{result['ev_detail']}}</td>
                <td id="evdt">{{result['evdate']}}</td>
                <td id="evtt">{{result['evtime']}} น.</td>
                <td id="evedt"><a  id="evedt" href="/project/{{result['pj_id']}}/editevent/{{result['ev_id']}}" >แก้ไข</a></td>
                <td id="evdlt">
                    <a  style="color:red" data-bs-toggle="modal" data-bs-target="#myModal1" >ลบ</a>
                        <div class="modal" id="myModal1">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                    <!-- Modal Header -->
                                    <div class="modal-header">
                                        <h4 class="modal-title">ยืนยันการลบ</h4>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                    </div>
                                    <!-- Modal body -->
                                    <div class="modal-body">
                                    คุณต้องการที่จะลบใช่หรือไม่
                                    </div>
                                    <!-- Modal footer -->
                                    <div class="modal-footer">
                                        <a type="submit" class="btn btn-primary"  href="/project/{{result['pj_id']}}/EVENT/{{result['ev_phase']}}/{{result['ev_id']}}" >ใช่</a>
                                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal" style="background-color: red;">ไม่ใช่</button>
                                    </div>  
                </td> 
                </tr>
                {% endfor %}
            </table>
        <!-- </div> -->
    </div>
    <script>
        var dif = Number(document.getElementById("dif").value);
        var tble = document.getElementById('eventt');
            var row = tble.rows; // Getting the rows
            if (dif > 30 || dif < 30){
            
  
            for (var i = 0; i < row[0].cells.length; i++) {
  
                // Getting the text of columnName
                var str = row[0].cells[i].innerHTML;
  
                // If 'Geek_id' matches with the columnName 
                if (str.search("แก้ไข") != -1) { 
                    for (var j = 0; j < row.length; j++) {
  
                        // Deleting the ith cell of each row
                        row[j].deleteCell(i);
                    }
                }
            }
        }
    </script>

    {% endblock %}